<!DOCTYPE html >
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<p:dialog header="Aprobar Permiso" widgetVar="dlgRequest" width="255"
	resizable="false" modal="true">
	<h:form id="formRequest">
		<p:outputPanel id="opRequest" style="text-align: center;">
			<h:outputText
				value="Está seguro que desea aprobar el permiso de funcionamiento?." />
		</p:outputPanel>

		<div align="center" style="padding-top: 15px;">
			<p:commandButton ajax="true" action="faces-redirect=false"
				update="growl :formList:dtList"
				oncomplete="PF('dlgRequest').hide();"
				actionListener="#{inspectorBean.editRequest()}" value="SI"
				style="margin: 0px 0px 1px 10px;" />

			<p:commandButton ajax="true" action="faces-redirect=false"
				update="growl" oncomplete="PF('dlgRequest').hide();"
				actionListener="#{inspectorBean.clearData()}" value="NO"
				style="margin: 0px 0px 1px 10px;" />
		</div>
	</h:form>
</p:dialog>

<p:dialog header="Rechazar Permiso" widgetVar="dlgRequest1" width="255"
	resizable="false" modal="true">
	<h:form id="formRequest1">
		<p:outputPanel id="opRequest1" style="text-align: center;">
			<h:outputText
				value="Está seguro que desea rechazar el permiso de funcionamiento?." />
		</p:outputPanel>

		<div align="center" style="padding-top: 15px;">
			<p:commandButton ajax="true" action="faces-redirect=false"
				update="growl :formList:dtList"
				oncomplete="PF('dlgRequest1').hide();"
				actionListener="#{inspectorBean.rejectRequest()}" value="SI"
				style="margin: 0px 0px 1px 10px;" />

			<p:commandButton ajax="true" action="faces-redirect=false"
				update="growl" oncomplete="PF('dlgRequest1').hide();"
				actionListener="#{inspectorBean.clearData()}" value="NO"
				style="margin: 0px 0px 1px 10px;" />
		</div>
	</h:form>
</p:dialog>

<p:dialog header="Revisar Documentos" widgetVar="dlgFilesRev"
	width="500" modal="true">
	<h:form id="formFilesRev" enctype="multipart/form-data">
		<p:outputPanel id="opFilesRev">
			<p:repeat value="#{inspectorBean.listFiles()}" var="item">
				<p:panelGrid columns="2" cellpadding="5" layout="grid">
					<h:outputText value="#{item.fileName}" />
					<p:commandButton value="Descargar" ajax="false"
						icon="ui-icon-newwin">
						<p:fileDownload value="#{inspectorBean.download(item)}" />
					</p:commandButton>
				</p:panelGrid>
			</p:repeat>
		</p:outputPanel>
		<div align="center" style="padding-top: 15px;">
			<p:commandButton ajax="true" action="faces-redirect=false"
				update="growl" oncomplete="PF('dlgFilesRev').hide();"
				actionListener="#{inspectorBean.clearData()}" value="Cerrar"
				style="margin: 0px 0px 1px 10px;" />
		</div>
	</h:form>
</p:dialog>

<p:dialog header="Atender Solicitud" widgetVar="dlgSelect" width="330"
	resizable="false" modal="true">
	<h:form id="formSelect">
		<p:outputPanel id="opSelect" style="text-align: center;">

			<h:panelGroup>
				<p:outputLabel for="txtUrl2"
					value="Para atender esta
							solicitud, necesita especificar la url del mapa." />
				<div>
					<p:inputTextarea rows="3" cols="28" id="txtUrl2"
						value="#{inspectorBean.selectedRequest.local.mapUrl}"
						required="true" requiredMessage="URL del mapa requerido" />
					<p:message for="txtUrl2" />
				</div>
			</h:panelGroup>
		</p:outputPanel>

		<div align="center" style="padding-top: 15px;">
			<p:commandButton ajax="true" action="faces-redirect=false"
				update="growl :formList:dtList"
				oncomplete="handleDialogSubmit(xhr, status, args, PF('dlgSelect'))"
				actionListener="#{inspectorBean.startInspection()}" value="Atender"
				style="margin: 0px 0px 1px 10px;" />

			<p:commandButton ajax="true" action="faces-redirect=false"
				update="growl :formList:dtList" oncomplete="PF('dlgSelect').hide();"
				actionListener="#{inspectorBean.clearData()}" value="Cancelar"
				style="margin: 0px 0px 1px 10px;" />
		</div>
	</h:form>
</p:dialog>

<p:dialog header="Cargar Documentos" widgetVar="dlgFiles" width="600"
	modal="true">
	<h:form id="formFiles" enctype="multipart/form-data">
		<p:outputPanel id="opFiles">
			<p:repeat value="#{inspectorBean.listRequirements()}" var="item">
				<p:panelGrid columns="2" cellpadding="5" layout="grid">
					<h:outputText value="#{item.requirementName}" />
					<p:fileUpload value="#{item.file}" mode="simple" skinSimple="true"
						label="Seleccionar" />
				</p:panelGrid>
			</p:repeat>
		</p:outputPanel>
		<div align="center" style="padding-top: 15px;">
			<p:commandButton ajax="false" action="faces-redirect=false"
				update="growl :formList:dtList" oncomplete="PF('dlgFiles').hide();"
				actionListener="#{inspectorBean.upload()}"
				value="Guardar Documentos" style="margin: 0px 0px 1px 10px;" />
		</div>
	</h:form>
</p:dialog>

<p:dialog header="Datos Inspección" widgetVar="dlgInspect" width="700"
	resizable="false" modal="true">
	<h:form id="formInspect">
		<p:outputPanel id="opInspect">

			<p:accordionPanel>
				<p:tab title="Tipo Construcción">
					<h:panelGrid columns="3" cellpadding="5">
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.concrete}"
							itemLabel="Hormigón" />
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.metallicStructure}"
							itemLabel="Estructura metálica" />
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.mixed}" itemLabel="Mixto" />
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.block}"
							itemLabel="Bloque" />
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.brick}"
							itemLabel="Ladrillo" />
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.adobe}" itemLabel="Adobe" />
					</h:panelGrid>
				</p:tab>

				<p:tab title="Instalaciones Eléctricas">
					<h:panelGrid columns="3" cellpadding="5">
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.installationsGood}"
							itemLabel="Buenas" />
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.installationsBad}"
							itemLabel="Malas" />
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.installationsInternal}"
							itemLabel="Internas" />
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.installationsExternal}"
							itemLabel="Externas" />
					</h:panelGrid>
				</p:tab>

				<p:tab title="Ventilación">
					<h:panelGrid columns="3" cellpadding="5">
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.ventilationNatural}"
							itemLabel="Natural" />
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.ventilationMechanic}"
							itemLabel="Mecánica" />
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.ventilationAdequate}"
							itemLabel="Adecuada" />
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.ventilationScarce}"
							itemLabel="Escasa" />
					</h:panelGrid>
				</p:tab>

				<p:tab title="Extintores">
					<p:commandButton id="btnAddExt" ajax="true"
						action="faces-redirect=false" update="dtListFireExt btnAddExt"
						disabled="#{inspectorBean.extinguishers.size() >= 3}"
						actionListener="#{inspectorBean.addExtinguisher()}"
						value="Agregar Extintor" style="margin: 0px 0px 10px 0px;" />

					<p:dataTable id="dtListFireExt" var="item"
						value="#{inspectorBean.extinguishers}">
						<p:column headerText="Cantidad">
							<p:inputText value="#{item.quantity}" style="width: 100px">
								<p:keyFilter mask="pint" />
							</p:inputText>
						</p:column>
						<p:column headerText="Tipo">
							<p:inputText value="#{item.type}" style="width: 100px" />
						</p:column>
						<p:column headerText="Capacidad">
							<p:inputText value="#{item.capacity}" style="width: 100px" />
						</p:column>
						<p:column headerText="Estado">
							<p:inputText value="#{item.status}" style="width: 100px" />
						</p:column>
						<p:column headerText="Ubicación">
							<p:inputText value="#{item.location}" style="width: 100px" />
						</p:column>
					</p:dataTable>
				</p:tab>

				<p:tab title="Otros">
					<h:panelGrid columns="2" cellpadding="5">
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.knowledgeExtinction}"
							itemLabel="Conocimientos sobre extinción" />
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.alarms}"
							itemLabel="Alarmas" />
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.fireDetectors}"
							itemLabel="Detectores de incendio" />
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.smokeDetectors}"
							itemLabel="Detectores de humo" />
						<p:selectBooleanCheckbox
							value="#{inspectorBean.inspectionHeader.emergencyLights}"
							itemLabel="Luces de emergencia" />
					</h:panelGrid>
				</p:tab>

				<p:tab title="Resumen">
					<h:panelGrid columns="3" cellpadding="5">
						<h:panelGroup>
							<p:outputLabel for="area1" value="Riesgos de incendio" />
							<div>
								<p:inputTextarea rows="3" cols="18" id="area1"
									autoResize="false"
									value="#{inspectorBean.inspectionHeader.riskFire}"
									required="false" requiredMessage="Riesgos requerido" />
								<p:message for="area1" />
							</div>
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel for="area2" value="Recomendaciones" />
							<div>
								<p:inputTextarea rows="3" cols="18" id="area2"
									autoResize="false"
									value="#{inspectorBean.inspectionHeader.recommendations}"
									required="false" requiredMessage="Recomendaciones requerida" />
								<p:message for="area2" />
							</div>
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel for="area3" value="Observaciones" />
							<div>
								<p:inputTextarea rows="3" cols="18" id="area3"
									autoResize="false"
									value="#{inspectorBean.inspectionHeader.observations}"
									required="false" requiredMessage="Observaciones requerido" />
								<p:message for="area3" />
							</div>
						</h:panelGroup>
					</h:panelGrid>
				</p:tab>
			</p:accordionPanel>
		</p:outputPanel>

		<div align="center" style="padding-top: 15px;">
			<p:commandButton ajax="true" action="faces-redirect=false"
				update="growl :formList:dtList"
				oncomplete="handleDialogSubmit(xhr, status, args, PF('dlgInspect'))"
				actionListener="#{inspectorBean.saveInspection()}" value="Guardar"
				style="margin: 0px 0px 1px 10px;" />

			<p:commandButton ajax="true" action="faces-redirect=false"
				update="growl :formList:dtList"
				oncomplete="PF('dlgInspect').hide();"
				actionListener="#{inspectorBean.clearData()}" value="Cancelar"
				style="margin: 0px 0px 1px 10px;" />
		</div>
	</h:form>
</p:dialog>

</html>
